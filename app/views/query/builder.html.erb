<div class="panel panel-primary main-container">
    
    <div class="panel-body">
        <div class="row">
            <div class="col-md-12">
                <h4>Please follow the steps to build your query</h4>
            </div>
        </div>
        <div class="row">
            <div class="col-md-3">
                <div class="panel panel-primary" >
                    <div class="panel-heading">STEP 1 : Select Dataset</div>
                    <div class="panel-body">
                        <div class="row ">
                            <div class="col-md-12">
                                <div class="dropdown clear-dataset">
                                  <button class="btn btn-default dropdown-toggle clear-dataset col-md-12" type="button" id="dd_select_dataset" data-toggle="dropdown">
                                    Choose a Dataset&nbsp;
                                    <span class="caret"></span>
                                  </button>
                                  <ul class="dropdown-menu col-md-12" role="menu" aria-labelledby="dd_select_dataset">
                                    <%get_datasets.each do |k,v|%>
                                       <li role="presentation"><a role="menuitem" tabindex="-1" onclick="QueryBuilder.selected_dataset('<%=v%>')"><%=k%></a></li> 
                                    <%end%>
                                  </ul>
                                </div>
                                <%=render :partial=>"shared/selector", :locals=>{:hidden_value_id=>"hdn_qb_dataset", :div_classes=>"done-dataset", :div_id=>"div_select_dataset", :remove_function=>"QueryBuilder.reset_dataset()", :hidden_value_value=>""}%>
                            </div>
                        </div>
                    </div>
                </div>
            </div> 
            <div class="col-md-3" id="div_qb_select_class" style="display:none;">
                <div class="panel panel-primary">
                    <div class="panel-heading">STEP 2 : Select Class</div>
                    <div class="panel-body">
                        <div class="row clear-search-class">
                            <div class="col-md-12">
                                <div class="row">
                                  <div class="col-lg-12">
                                      <input type="text" class="form-control" placeholder="eg, Actor, City ..." id="txt_search_classes" required >
                                      <input type="hidden" id="hdn_searched_class_value" />
                                      <input type="hidden" id="hdn_done_searching_class" value="false"/>
                                  </div><!-- /.col-lg-6 -->
                                </div><!-- /.row -->
                            </div>
                        </div>
                        <div class="row" id="qb_class_search_loading" style="display:none;">
                            <div class="col-md-12">
                                <center><%=image_tag "jar-loading.gif" , :height=>"130px"%></center>
                            </div>
                        </div>
                        <div class="row" id="qb_class_search_error"  style="display:none;">
                            <div class="col-md-12 ">
                                <div class="alert alert-danger" style="margin-top:20px;"></div>
                            </div>
                        </div>
                        <div class="row" id="div_classes_search_result">
                            <div class="col-md-12">
                                
                                <%=render :partial=>"shared/selector", :locals=>{:hidden_value_id=>"hdn_qb_class", :div_classes=>"done-search-class", :div_id=>"div_selected_class", :remove_function=>"QueryBuilder.reset_searched_class()", :hidden_value_value=>""}%>
                            </div>
                        </div>
                    </div>
                    <div class="list-group" id="tbl_classes_search_result"></div>
                </div>
            </div>
            <div class="col-md-3 hidden" >
                <div class="row">
                    <div class="col-md-12">
                        STEP 3 : Select Property (Optional)
                    </div>
                </div>
                <div class="row">
                    <div class="col-md-12">
                        
                    </div>
                </div>
            </div>
            <div class="col-md-3 " style="display:none;">
                <div class="row">
                    <div class="col-md-12">
                        STEP 4 : Select Inequaly and type in values (Optional)
                    </div>
                </div>
                <div class="row">
                    <div class="col-md-12">
                        
                    </div>
                </div>
            </div>
        </div>
        <div class="row qb-equivalent-query-main" style="display:none;">
            <div class="col-md-12">
                <div class="panel panel-primary">
                    <div class="panel-heading">
                        <h4 class="panel-title">Equivalent SPARQL Query</h4>
                    </div>
                    <div class="panel-body">
                        <div class="row " > 
                            <div class="col-md-8">
                                <textarea rows="7" id="txt_sparql_query" style="width:100%;" placeholder="Type your SPARQL query here ..." class="form-control"></textarea>
                            </div>
                            <div class="col-md-1">
                                <button  type="button" class="btn btn-lg btn-success" onclick="execute_sparql_query()">Run !</button>
                            </div>

                        </div>
                    </div>
                </div>
            </div>
        </div>

        <%=render :partial=>"query/search_results"%>
    </div>
    
</div>
<script>
    $(function () {
        $('.dropdown-toggle').dropdown();
    });
    $("#txt_search_classes").bind('input',function(){QueryBuilder.search_classes_change();});
</script>
